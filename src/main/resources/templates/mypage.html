<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
  <head>
    <meta charset="UTF-8">
    <title>マイページ</title>
  </head>

  <body>
    <h1>My Page</h1>
    <p><strong th:text="${username}"></strong>さんの投稿一覧</p>

    <p>
      <a th:href="@{/follow/followings/{id}(id=${userId})}">フォロー<span th:text="${followingCount}">0</span>人</a>
      <a th:href="@{/follow/followers/{id}(id=${userId})}">フォロワー<span th:text="${followerCount}">0</span>人</a>
    </p>
    

    <div>
      <img th:if="${profileImage != null}"
           th:src="@{'/uploads/' + ${profileImage}}"
           alt="プロフィール画像"
           style="max-width: 100%; height:auto; display: block;">

      <img th:if="${profileImage == null}"
           th:src="@{/images/no_image.jpg}"
           alt="プロフィール画像"
           style="max-width: 100%; height: auto; display: block;">
    </div>

    <div style="margin-top: 20px;">
      <a th:href="@{/mypage/liked}">いいね一覧</a>
    </div>


    <div style="margin-top: 15px;">
      <h2>プロフィール</h2>

      <p><strong>身長 ： </strong>
        <span th:text="${height != null ? height : '未設定'}"></span>
      </p>

      <p><strong>体重 : </strong>
        <span th:text="${weight != null ? weight : '未設定'}"></span>
      </p>

      <p><strong>年齢 : </strong>
        <span th:text="${age != null ? age : '未設定'}"></span>
      </p>

      <p><strong>生息地 : </strong>
        <span th:text="${location != null ? location : '未設定'}"></span>
      </p>

      <p><strong>自己紹介 : </strong>
        <span th:text="${bio != null ? bio : '未設定'}"></span>
      </p>

      <p><strong>趣味 : </strong>
        <span th:text="${hobbies != null ? hobbies : '未設定'}"></span>
      </p>
    </div>

    <a th:href="@{/home}">HOME</a>

    <div th:if="${isOwnPage}">
      <a th:href="@{/mypage/edit}">編集</a>
        <form th:action="@{/mypage/delete}" method="post" onsubmit="return confirm('本当に退会しますか？');" class="d-inline">
        <button type="submit" class="btn btn-danger">退会する</button>
      </form>
    </div>
    <hr>

    <div th:if="${#lists.isEmpty(posts)}">
      <p>投稿はまだありません。</p>
    </div>

    <div th:each="post : ${posts}">
      <p th:text="${post.content}"></p>
      <p th:text="${#temporals.format(post.createdAt, 'yyyy-MM-dd HH:mm')}"></p>
      <hr>
    </div>
  </body>
</html>